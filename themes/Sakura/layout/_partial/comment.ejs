<% if (theme.valine.enable && post.comments) { %>
<div id="vcomments"></div>
<script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
<!-- <script src="//unpkg.com/valine/dist/Valine.min.js"></script> -->
<script src='//unpkg.com/valine@1.3.4/dist/Valine.min.js'></script>
<!-- 评论框美化 -->
<style>
  .v .vwrap{padding: 0 0 44px;}
  .v .veditor{min-height: 10rem;
      background-image: url(/images/comment.png);
      background-size: contain;
      background-repeat: no-repeat;
      background-position: right;
      background-color: rgba(255,255,255,0);
      resize: none;}
  .v .vwrap .vedit{padding-top:20px;}
  .v .vwrap .vheader{width: 80%;bottom:0;position: absolute;background: #fff7f7f7;}
  .v .vinput{padding:10px 15px; text-align: center;}
  .v .vwrap .vheader .vinput{border-bottom:0px}
  .v .vwrap .vedit .vctrl{margin-top:-44px;right:0;position:absolute;margin-right:-3px;}
  .v .vwrap .vcontrol{position:absolute;right:0;bottom:0;width:20%;padding-top:0px;}
  .v .vwrap .vcontrol .col.col-20,
  .v .vwrap .vedit .vctrl span.vpreview-btn{display: none}
  .v .vwrap .vcontrol .col.col-80{width: 100%;}
  .v .vbtn.vsubmit{border-radius: 0;padding: 0;color: #fff;line-height: 44px;width:100%;border: none;background:#ff9999;}
  .v .vlist .vcard .vhead .vsys{background: #fff7f7f7;}
  @media screen and (max-width: 520px){
  .v .vwrap .vheader .vinput{width: 33.33%;padding:10px 5px;}
  }
</style>
<script>
  window.onload = function(){
      var valine = new Valine();
      valine.init({
        el: '#vcomments',
        appId: "<%= theme.valine.appId %>",
        appKey: "<%= theme.valine.appKey %>",
        path: window.location.pathname,
        avatar: "<%= theme.valine.avatar %>",
        placeholder: "<%= theme.valine.palaceholder %>"
      })
      $("input[name='mail']").attr("placeholder","邮箱(选填)");
      $("input[name='link']").attr("placeholder","网址(选填)");
  }

  // 点击回复直接评论,官方版本点击回复时都是跳回到页面上方的评论框进行回复，评论框是固定不动的
  $(document).ready(function(){
        //$('.vemoji-btn').text('😀');
        $("#vcomments").on('click', 'span.vat',function(){
            $(this).parent('div.vmeta').next("div.vcontent").after($("div.vwrap"));
            $('textarea#veditor').focus();
        })
    })
  


</script>
<% } %>